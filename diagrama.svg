<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="blueGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3B82F6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1E40AF;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="greenGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10B981;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#047857;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="purpleGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8B5CF6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#5B21B6;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="orangeGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F59E0B;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#D97706;stop-opacity:1" />
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="1200" height="800" fill="#F8FAFC"/>

  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#1E293B">
    Arquitetura do Sistema - API de Livros com Web Scraping
  </text>

  <!-- External Source -->
  <rect x="50" y="80" width="120" height="80" rx="10" fill="url(#orangeGrad)" stroke="#EA580C" stroke-width="2"/>
  <text x="110" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Site Books</text>
  <text x="110" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">(Fonte de Dados)</text>

  <!-- Web Scraping Component -->
  <rect x="250" y="80" width="140" height="80" rx="10" fill="url(#purpleGrad)" stroke="#7C3AED" stroke-width="2"/>
  <text x="320" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Web Scraping</text>
  <text x="320" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Extra√ß√£o de Dados</text>
  <text x="320" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">de Livros</text>

  <!-- Database -->
  <rect x="50" y="220" width="140" height="100" rx="10" fill="url(#greenGrad)" stroke="#059669" stroke-width="2"/>
  <text x="120" y="245" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">PostgreSQL</text>
  <text x="120" y="260" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Banco de Dados</text>
  <text x="120" y="275" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">‚Ä¢ Livros</text>
  <text x="120" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">‚Ä¢ Categorias</text>
  <text x="120" y="305" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">‚Ä¢ Metadados</text>

  <!-- FastAPI Application -->
  <rect x="450" y="180" width="300" height="200" rx="15" fill="url(#blueGrad)" stroke="#2563EB" stroke-width="3"/>
  <text x="600" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white">FastAPI Application</text>
  
  <!-- Authentication Layer -->
  <rect x="470" y="220" width="260" height="40" rx="5" fill="rgba(255,255,255,0.2)" stroke="rgba(255,255,255,0.5)"/>
  <text x="600" y="235" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">üîê Camada de Autentica√ß√£o JWT</text>
  <text x="600" y="250" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">/login ‚Ä¢ /refresh ‚Ä¢ /verify</text>

  <!-- API Endpoints -->
  <rect x="470" y="270" width="120" height="100" rx="5" fill="rgba(255,255,255,0.15)" stroke="rgba(255,255,255,0.3)"/>
  <text x="530" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">Endpoints Core</text>
  <text x="530" y="298" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">GET /books</text>
  <text x="530" y="310" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">GET /books/{id}</text>
  <text x="530" y="322" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">GET /search</text>
  <text x="530" y="334" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">GET /categories</text>
  <text x="530" y="346" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">GET /health</text>
  <text x="530" y="358" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">POST /scraping/trigger</text>

  <rect x="610" y="270" width="120" height="100" rx="5" fill="rgba(255,255,255,0.15)" stroke="rgba(255,255,255,0.3)"/>
  <text x="670" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">Endpoints Stats</text>
  <text x="670" y="298" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">GET /stats/overview</text>
  <text x="670" y="310" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">GET /stats/categories</text>
  <text x="670" y="322" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">GET /top-rated</text>
  <text x="670" y="334" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">GET /price-range</text>

  <!-- Vercel Deployment -->
  <rect x="900" y="180" width="200" height="200" rx="15" fill="#000000" stroke="#333333" stroke-width="2"/>
  <text x="1000" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white">Vercel</text>
  <text x="1000" y="225" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white">Deployment Platform</text>
  
  <!-- Vercel Features -->
  <rect x="920" y="240" width="160" height="120" rx="5" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.2)"/>
  <text x="1000" y="255" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">Recursos</text>
  <text x="1000" y="270" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">‚Ä¢ Auto Deploy</text>
  <text x="1000" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">‚Ä¢ SSL/HTTPS</text>
  <text x="1000" y="300" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">‚Ä¢ CDN Global</text>
  <text x="1000" y="315" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">‚Ä¢ Serverless Functions</text>
  <text x="1000" y="330" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">‚Ä¢ Environment Variables</text>
  <text x="1000" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">‚Ä¢ Monitoring</text>

  <!-- Client Applications -->
  <rect x="900" y="450" width="80" height="60" rx="8" fill="url(#orangeGrad)" stroke="#EA580C"/>
  <text x="940" y="470" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">Web App</text>
  <text x="940" y="485" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">Frontend</text>
  <text x="940" y="498" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">React/Vue</text>

  <rect x="1000" y="450" width="80" height="60" rx="8" fill="url(#orangeGrad)" stroke="#EA580C"/>
  <text x="1040" y="470" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">Mobile App</text>
  <text x="1040" y="485" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">iOS/Android</text>

  <!-- Data Flow Arrows -->
  <!-- Scraping flow -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#374151"/>
    </marker>
  </defs>

  <!-- Site Books to Web Scraping -->
  <line x1="170" y1="120" x2="250" y2="120" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="210" y="115" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#374151">HTTP Requests</text>

  <!-- Web Scraping to Database -->
  <line x1="320" y1="160" x2="120" y2="220" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="220" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#374151">Dados Extra√≠dos</text>

  <!-- Database to FastAPI -->
  <line x1="190" y1="270" x2="450" y2="270" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="320" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#374151">SQL Queries</text>

  <!-- FastAPI to Vercel -->
  <line x1="750" y1="280" x2="900" y2="280" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="825" y="275" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#374151">Deploy</text>

  <!-- Vercel to Clients -->
  <line x1="1000" y1="380" x2="940" y2="450" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="1000" y1="380" x2="1040" y2="450" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="990" y="415" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#374151">HTTPS/API</text>

  <!-- FastAPI to Web Scraping (trigger) -->
  <path d="M 600 180 Q 600 140 390 140" stroke="#EF4444" stroke-width="2" fill="none" marker-end="url(#arrowhead)" stroke-dasharray="5,5"/>
  <text x="500" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#EF4444">Trigger Scraping</text>

  <!-- Security Layer -->
  <rect x="450" y="420" width="300" height="60" rx="10" fill="rgba(239, 68, 68, 0.1)" stroke="#EF4444" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="600" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#DC2626">üõ°Ô∏è Camada de Seguran√ßa</text>
  <text x="600" y="455" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#DC2626">JWT Authentication ‚Ä¢ Rate Limiting ‚Ä¢ CORS</text>
  <text x="600" y="470" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#DC2626">Input Validation ‚Ä¢ Error Handling</text>

  <!-- Technology Stack -->
  <rect x="50" y="420" width="350" height="120" rx="10" fill="rgba(59, 130, 246, 0.1)" stroke="#3B82F6" stroke-width="2"/>
  <text x="225" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1E40AF">Stack Tecnol√≥gico</text>
  
  <text x="70" y="465" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#1E40AF">Backend:</text>
  <text x="70" y="480" font-family="Arial, sans-serif" font-size="10" fill="#374151">‚Ä¢ Python + FastAPI</text>
  <text x="70" y="495" font-family="Arial, sans-serif" font-size="10" fill="#374151">‚Ä¢ PostgreSQL</text>
  <text x="70" y="510" font-family="Arial, sans-serif" font-size="10" fill="#374151">‚Ä¢ JWT Auth</text>
  <text x="70" y="525" font-family="Arial, sans-serif" font-size="10" fill="#374151">‚Ä¢ Web Scraping (BeautifulSoup/Scrapy)</text>

  <text x="220" y="465" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#1E40AF">Deployment:</text>
  <text x="220" y="480" font-family="Arial, sans-serif" font-size="10" fill="#374151">‚Ä¢ Vercel</text>
  <text x="220" y="495" font-family="Arial, sans-serif" font-size="10" fill="#374151">‚Ä¢ Serverless</text>
  <text x="220" y="510" font-family="Arial, sans-serif" font-size="10" fill="#374151">‚Ä¢ Auto-scaling</text>
  <text x="220" y="525" font-family="Arial, sans-serif" font-size="10" fill="#374151">‚Ä¢ Global CDN</text>

  <!-- Data Flow Legend -->
  <rect x="50" y="570" width="300" height="80" rx="8" fill="rgba(156, 163, 175, 0.1)" stroke="#9CA3AF"/>
  <text x="200" y="590" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#374151">Fluxo de Dados</text>
  
  <line x1="70" y1="605" x2="100" y2="605" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="110" y="609" font-family="Arial, sans-serif" font-size="9" fill="#374151">Fluxo Normal de Dados</text>
  
  <line x1="70" y1="620" x2="100" y2="620" stroke="#EF4444" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
  <text x="110" y="624" font-family="Arial, sans-serif" font-size="9" fill="#374151">Trigger de Scraping (Autenticado)</text>
  
  <line x1="70" y1="635" x2="100" y2="635" stroke="#9CA3AF" stroke-width="2" stroke-dasharray="3,3"/>
  <text x="110" y="639" font-family="Arial, sans-serif" font-size="9" fill="#374151">Camada de Seguran√ßa</text>

  <!-- API Endpoints Details -->
  <rect x="450" y="570" width="650" height="200" rx="10" fill="rgba(34, 197, 94, 0.05)" stroke="#22C55E"/>
  <text x="775" y="590" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#15803D">Endpoints da API</text>

  <!-- Authentication Endpoints -->
  <text x="470" y="610" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#DC2626">üîê Autentica√ß√£o:</text>
  <text x="470" y="625" font-family="Arial, sans-serif" font-size="9" fill="#374151">POST /api/v1/auth/login - Login do usu√°rio</text>
  <text x="470" y="640" font-family="Arial, sans-serif" font-size="9" fill="#374151">GET /api/v1/auth/refresh - Renovar token</text>
  <text x="470" y="655" font-family="Arial, sans-serif" font-size="9" fill="#374151">GET /api/v1/auth/verify - Verificar token</text>

  <!-- Core Endpoints -->
  <text x="470" y="680" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#1E40AF">üìö Core (Obrigat√≥rios):</text>
  <text x="470" y="695" font-family="Arial, sans-serif" font-size="9" fill="#374151">GET /api/v1/books - Listar livros</text>
  <text x="470" y="710" font-family="Arial, sans-serif" font-size="9" fill="#374151">GET /api/v1/books/{id} - Detalhes do livro</text>
  <text x="470" y="725" font-family="Arial, sans-serif" font-size="9" fill="#374151">GET /api/v1/books/search - Buscar livros</text>
  <text x="470" y="740" font-family="Arial, sans-serif" font-size="9" fill="#374151">GET /api/v1/categories - Listar categorias</text>
  <text x="470" y="755" font-family="Arial, sans-serif" font-size="9" fill="#374151">GET /api/v1/health - Status da API</text>

  <!-- Optional Endpoints -->
  <text x="750" y="610" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#8B5CF6">üìä Estat√≠sticas (Opcionais):</text>
  <text x="750" y="625" font-family="Arial, sans-serif" font-size="9" fill="#374151">GET /api/v1/stats/overview - Estat√≠sticas gerais</text>
  <text x="750" y="640" font-family="Arial, sans-serif" font-size="9" fill="#374151">GET /api/v1/stats/categories - Stats por categoria</text>
  <text x="750" y="655" font-family="Arial, sans-serif" font-size="9" fill="#374151">GET /api/v1/books/top-rated - Livros bem avaliados</text>
  <text x="750" y="670" font-family="Arial, sans-serif" font-size="9" fill="#374151">GET /api/v1/books/price-range - Filtro por pre√ßo</text>

  <!-- Scraping Endpoint -->
  <text x="750" y="695" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#F59E0B">üîß Scraping (Secreto):</text>
  <text x="750" y="710" font-family="Arial, sans-serif" font-size="9" fill="#374151">POST /api/v1/scraping/trigger - Executar scraping</text>
  <text x="750" y="725" font-family="Arial, sans-serif" font-size="8" fill="#DC2626">(Requer autentica√ß√£o especial)</text>

</svg>